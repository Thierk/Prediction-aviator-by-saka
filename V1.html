<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prédictions x4 Fiables</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@2/dist/tesseract.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* Interface inchangée */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
body{background:linear-gradient(135deg,#0c0e2a,#232850,#2a2f68);color:#fff;min-height:100vh;padding:30px;}
.container{max-width:900px;margin:0 auto;background:rgba(255,255,255,0.05);backdrop-filter:blur(12px);border-radius:20px;padding:30px;box-shadow:0 10px 30px rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.1);}
header{text-align:center;margin-bottom:30px;}
h1{font-size:2.5rem;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.5);background:linear-gradient(45deg,#6c5ce7,#a29bfe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.subtitle{font-size:1.1rem;opacity:0.9;}
.input-group{margin-bottom:20px;}
label{display:block;margin-bottom:8px;font-weight:500;color:#a29bfe;}
input{width:100%;padding:12px 15px;border-radius:10px;border:none;background:rgba(255,255,255,0.08);color:white;font-size:1rem;}
input::placeholder{color:rgba(255,255,255,0.5);}
.upload-area{margin-top:20px;text-align:center;padding:30px 20px;border:3px dashed rgba(255,255,255,0.2);border-radius:15px;cursor:pointer;transition:all 0.3s;}
.upload-area:hover{background:rgba(255,255,255,0.05);border-color:rgba(255,255,255,0.4);}
.upload-icon{font-size:3rem;margin-bottom:15px;color:#6c5ce7;}
.btn{padding:14px 28px;border:none;border-radius:10px;cursor:pointer;font-weight:bold;transition:all 0.3s;display:inline-flex;align-items:center;justify-content:center;gap:10px;font-size:1rem;width:100%;margin-top:20px;}
.btn-analyze{background:linear-gradient(45deg,#00cec9,#00b894);color:white;}
.btn-analyze:hover{background:linear-gradient(45deg,#00b894,#00cec9);transform:translateY(-3px);box-shadow:0 7px 20px rgba(0,206,201,0.4);}
.btn:disabled{background:#555;cursor:not-allowed;opacity:0.6;}
.btn:disabled:hover{transform:none;box-shadow:none;}
.screenshot{margin-top:30px;text-align:center;}
.screenshot img{max-width:100%;border-radius:15px;box-shadow:0 8px 25px rgba(0,0,0,0.4);border:2px solid rgba(255,255,255,0.15);}
.prediction-grid{margin-top:30px;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;}
.prediction{background:linear-gradient(135deg,rgba(108,92,231,0.15),rgba(0,206,201,0.15));padding:20px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.1);text-align:center;}
.prediction-title{font-size:1.2rem;margin-bottom:15px;color:#a29bfe;}
.prediction-value{font-size:2.2rem;font-weight:bold;background:linear-gradient(45deg,#6c5ce7,#00cec9);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px;}
.nonce-info{font-size:0.9rem;color:#a29bfe;margin-bottom:15px;}
.probability-text{display:flex;justify-content:space-between;margin-top:15px;font-size:0.9rem;opacity:0.8;}
.probability-bar{height:10px;background:rgba(255,255,255,0.1);border-radius:5px;margin-top:8px;overflow:hidden;}
.probability-fill{height:100%;background:linear-gradient(90deg,#6c5ce7,#00cec9);border-radius:5px;width:0%;transition:width 1s ease-in-out;}
.no-prediction{text-align:center;padding:40px;color:#a29bfe;font-style:italic;grid-column:1/-1;}
.loading{text-align:center;margin:30px 0;grid-column:1/-1;}
.loader{border:5px solid rgba(255,255,255,0.2);border-top:5px solid #00cec9;border-radius:50%;width:50px;height:50px;animation:spin 1.5s linear infinite;margin:0 auto 20px;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.confidence-badge{display:inline-block;background:linear-gradient(45deg,#6c5ce7,#00cec9);padding:4px 10px;border-radius:20px;font-size:0.8rem;margin-top:10px;}
.optimization-info{margin-top:20px;padding:15px;background:rgba(0,0,0,0.2);border-radius:10px;font-size:0.9rem;color:#a29bfe;}
.progress-container{margin-top:15px;background:rgba(255,255,255,0.1);border-radius:10px;height:10px;overflow:hidden;}
.progress-bar{height:100%;background:linear-gradient(90deg,#6c5ce7,#00cec9);width:0%;transition:width 0.3s ease;}
@media(max-width:768px){.container{padding:20px;}h1{font-size:2rem;}.prediction-grid{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="container">
<header>
<h1><i class="fas fa-bolt"></i> Prediction by SAKA</h1>
<p class="subtitle">Analyse optimisée pour des résultats plus rapides</p>
</header>

<div class="input-group">
<label for="nonce"><i class="fas fa-key"></i> Valeur du nonce:</label>
<input type="number" id="nonce" placeholder="Ex: 1000" value="1000">
</div>

<div class="input-group">
<label for="file-input"><i class="fas fa-image"></i> Importer une capture d'historique (optionnel):</label>
<div class="upload-area" id="upload-area">
<div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
<p>Glissez-déposez votre capture ou cliquez pour parcourir</p>
<input type="file" id="file-input" accept="image/*" style="display:none;">
</div>
</div>

<button class="btn btn-analyze" id="analyze-btn"><i class="fas fa-rocket"></i> Analyser rapidement</button>

<div class="screenshot" id="screenshot">
<img id="screenshot-img" src="" alt="Aperçu de la capture d'écran">
</div>

<div class="optimization-info">
<p><i class="fas fa-info-circle"></i> Pour accélérer l'analyse, vous pouvez saisir manuellement les valeurs :</p>
<div class="input-group" style="margin-top:15px;">
<label for="manual-values"><i class="fas fa-pen"></i> Valeurs (séparées par des virgules):</label>
<input type="text" id="manual-values" placeholder="Ex: 1.5, 2.3, 4, 1.2, 6.5">
</div>
</div>

<div class="prediction-grid" id="prediction-grid">
<div class="no-prediction" id="no-prediction"><i class="fas fa-search fa-3x" style="margin-bottom:15px;"></i>
<p>Cliquez sur "Analyser rapidement" pour voir les prédictions</p></div>
</div>
</div>

<script>
const fileInput=document.getElementById('file-input');
const analyzeBtn=document.getElementById('analyze-btn');
const screenshotImg=document.getElementById('screenshot-img');
const screenshotDiv=document.getElementById('screenshot');
const nonceInput=document.getElementById('nonce');
const manualValuesInput=document.getElementById('manual-values');
const predictionGrid=document.getElementById('prediction-grid');
const noPrediction=document.getElementById('no-prediction');
const uploadArea=document.getElementById('upload-area');

let extractedValues=[];
let hasImage=false;
let ocrWorker=null;
screenshotDiv.style.display='none';

function initOCRWorker(){if(!ocrWorker){ocrWorker=Tesseract.createWorker();}}

uploadArea.addEventListener('click',()=>fileInput.click());
fileInput.addEventListener('change',e=>{
if(e.target.files && e.target.files[0]){
const reader=new FileReader();
reader.onload=function(event){
screenshotImg.src=event.target.result;
screenshotDiv.style.display='block';
hasImage=true;
manualValuesInput.value="";
};
reader.readAsDataURL(e.target.files[0]);
}});

uploadArea.addEventListener('dragover',e=>{e.preventDefault();uploadArea.style.background='rgba(255,255,255,0.05)';uploadArea.style.borderColor='rgba(255,255,255,0.4)';});
uploadArea.addEventListener('dragleave',()=>{uploadArea.style.background='';uploadArea.style.borderColor='rgba(255,255,255,0.2)';});
uploadArea.addEventListener('drop',e=>{
e.preventDefault();
uploadArea.style.background='';
uploadArea.style.borderColor='rgba(255,255,255,0.2)';
if(e.dataTransfer.files&&e.dataTransfer.files[0]){
fileInput.files=e.dataTransfer.files;
fileInput.dispatchEvent(new Event('change',{bubbles:true}));
}});

function generateSHA256(input){return CryptoJS.SHA256(input).toString(CryptoJS.enc.Hex);}
function analyzeExtractedValues(values){if(values.length===0)return{x4:0};const totalTours=values.length;x2Plus=values.filter(v=>v>=2).length;x4Plus=values.filter(v=>v>=4).length;return{x4:x2Plus>0?x4Plus/x2Plus:0,totalTours,x2Plus,x4Plus};}
function predictX4(nonce,historyRatios,hash){const part1=parseInt(hash.substr(0,4),16);const part2=parseInt(hash.substr(4,4),16);let probability=historyRatios.x4;const variation=(part1%100)/300;probability=Math.min(0.99,Math.max(0.1,probability+variation));const multiplier=4+(part2%7);return{multiplier:multiplier,probability:probability,nonce:nonce,confidence:probability>0.8?"Élevée":"Moyenne"};}
function generateX4Predictions(nonceStart,extractedValues,maxPredictions=4){
const predictions=[];const historyRatios=analyzeExtractedValues(extractedValues);let attempts=0;
while(predictions.length<maxPredictions && attempts<50){
const randomGap=Math.floor(Math.random()*10)+1;
const currentNonce=nonceStart+randomGap*Math.floor(Math.random()*5+1);
const hash=generateSHA256(currentNonce+extractedValues.join(""));
const pred=predictX4(currentNonce,historyRatios,hash);
if(pred.probability>=0.7 && !predictions.some(p=>p.nonce===pred.nonce)){predictions.push(pred);}
attempts++;
}
return predictions;
}

function displayPredictions(predictions,analysisData){
predictionGrid.innerHTML='';
if(predictions.length===0){noPrediction.style.display='block';noPrediction.innerHTML='<i class="fas fa-times fa-3x" style="margin-bottom:15px;"></i><p>Aucune donnée valide pour générer des prédictions</p>';return;}
noPrediction.style.display='none';

const analysisElement=document.createElement('div');
analysisElement.className='prediction';
analysisElement.style.gridColumn='1 / -1';
analysisElement.innerHTML=`<div class="prediction-title"><i class="fas fa-chart-bar"></i> Analyse des Tendances</div>
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-top:15px;">
<div><div style="font-size:0.9rem;color:#a29bfe;">Tours analysés</div><div style="font-size:1.5rem;font-weight:bold;">${analysisData.totalTours}</div></div>
<div><div style="font-size:0.9rem;color:#a29bfe;">Tours ≥ x2</div><div style="font-size:1.5rem;font-weight:bold;">${analysisData.x2Plus}</div></div>
<div><div style="font-size:0.9rem;color:#a29bfe;">Tours ≥ x4</div><div style="font-size:1.5rem;font-weight:bold;">${analysisData.x4Plus}</div></div>
<div><div style="font-size:0.9rem;color:#a29bfe;">Ratio x4/x2</div><div style="font-size:1.5rem;font-weight:bold;">${(analysisData.x4*100).toFixed(1)}%</div></div></div>`;
predictionGrid.appendChild(analysisElement);

predictions.forEach((pred,index)=>{
const predictionElement=document.createElement('div');
predictionElement.className='prediction';
predictionElement.innerHTML=`<div class="prediction-title">Prediction ${index+1}</div>
<div class="prediction-value">${pred.multiplier.toFixed(2)}X</div>
<div class="nonce-info">Cash out conseillé: x2 / x4<br>Nonce: ${pred.nonce}</div>
<div class="probability-text"><span>Fiabilité</span><span>${(pred.probability*100).toFixed(1)}%</span></div>
<div class="probability-bar"><div class="probability-fill" style="width:${pred.probability*100}%"></div></div>
<div class="confidence-badge"><i class="fas ${pred.confidence==='Élevée'?'fa-bolt':'fa-chart-line'}"></i> ${pred.confidence}</div>`;
predictionGrid.appendChild(predictionElement);
setTimeout(()=>{predictionElement.querySelector('.probability-fill').style.width=`${pred.probability*100}%`;},100);
});
}

analyzeBtn.addEventListener('click',async()=>{
if(!nonceInput.value){alert("Veuillez entrer une valeur de nonce");return;}

extractedValues=[];
if(manualValuesInput.value){
extractedValues=manualValuesInput.value.split(',').map(v=>parseFloat(v.trim())).filter(n=>!isNaN(n)&&n>=1);
} else if(hasImage){
predictionGrid.innerHTML=`<div class="loading"><div class="loader"></div><p>Analyse OCR en cours... (cela peut prendre quelques secondes)</p></div>`;
try{
initOCRWorker();
await ocrWorker.load();
await ocrWorker.loadLanguage('eng');
await ocrWorker.initialize('eng');
const {data:{text}}=await ocrWorker.recognize(screenshotImg.src);
let numbers=text.match(/(\d+(\.\d+)?)/g)||[];
extractedValues=numbers.map(Number).filter(n=>!isNaN(n)&&n>=1);
}catch(error){console.error("Erreur OCR:",error);extractedValues=[];}
}

if(extractedValues.length===0){
displayPredictions([], {totalTours:0,x2Plus:0,x4Plus:0,x4:0});
return;
}

predictionGrid.innerHTML=`<div class="loading"><div class="loader"></div><p>Analyse des tendances et prédiction en cours...</p></div>`;
const nonce=parseInt(nonceInput.value);
setTimeout(()=>{
const analysisData=analyzeExtractedValues(extractedValues);
const predictions=generateX4Predictions(nonce,extractedValues,4);
displayPredictions(predictions,analysisData);
},500);
});
</script>
</body>
</html>